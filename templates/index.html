<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Trace3 × Pure | Team Portal</title>
  <link rel="icon" href='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><rect width="64" height="64" rx="12" fill="%23f04e23"/><circle cx="46" cy="18" r="10" fill="white" stroke="%23f04e23" stroke-width="4"/></svg>'/>
  <style>
    :root{
      --pure-orange:#f04e23;--pure-orange-700:#d9431c;
      --ink-900:#0f1115;--slate-700:#374151;--slate-600:#4b5563;
      --slate-300:#d1d5db;--slate-200:#e5e7eb;--bg:#f6f7fb;--card:#ffffff;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--ink-900);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif}
    .wrap{max-width:1040px;margin:0 auto;padding:28px 16px 40px}
    .brandbar{background:#fff;border-bottom:4px solid var(--pure-orange);border-radius:14px;box-shadow:0 10px 30px rgba(15,17,21,.06);padding:12px 16px;display:flex;align-items:center;justify-content:space-between;gap:16px}
    .logos{display:flex;align-items:center;gap:14px}
    .logo{height:28px;display:block}.logo.trace3{height:36px}
    .hero{position:relative;background:linear-gradient(180deg,#fff 0%, #fff 60%, #fdf2ec 100%);border:1px solid var(--slate-200);border-radius:16px;padding:28px 20px 20px;margin-top:16px}
    .pill{margin:0 auto 10px;background:var(--pure-orange);color:#fff;font-weight:800;letter-spacing:.02em;border-radius:999px;padding:14px 22px;display:inline-flex;align-items:center;gap:10px;box-shadow:0 8px 24px rgba(240,78,35,.25)}
    .pill .dot{width:8px;height:8px;border-radius:999px;background:#fff;opacity:.9}
    .hero h1{margin:8px 0 0;font-size:26px}
    .hero p{margin:8px 0 0;color:#4b5563}

    /* Stacked sections */
    .stack{display:flex;flex-direction:column;gap:16px;margin-top:18px}
    .card{
      background:var(--card);border:1px solid var(--slate-200);border-radius:16px;
      box-shadow:0 10px 30px rgba(15,17,21,.06);padding:18px 16px;min-height:110px;
      display:flex;flex-direction:column;justify-content:center;
    }
    .card h3{margin:0 0 8px 0;font-size:18px;letter-spacing:.01em}
    .muted{color:#4b5563;font-size:13px}

    /* Link list styling */
    .links{margin:8px 0 0 0; padding-left:18px; line-height:1.6}
    .links a{color:var(--pure-orange); text-decoration:underline; text-underline-offset:2px}
    .links a:hover{color:var(--pure-orange-700)}

    /* Sales: two-column interior — main links + right gray Alliances box */
    .sales-grid{
      display:grid;
      grid-template-columns: 1fr 260px;
      gap:12px;
      align-items:start;
      margin-top:8px;
    }
    @media (max-width:760px){
      .sales-grid{ grid-template-columns:1fr; }
    }
    .alliance{
      background:#f3f4f6;                 /* gray like screenshot */
      border:1px solid var(--slate-200);
      border-radius:12px;
      padding:12px;
    }
    .alliance h4{
      margin:0 0 8px 0;
      font-size:14px;
      letter-spacing:.02em;
      color:#0f1115;
    }
    .alliance a{
      display:inline-block;
      color:#0f1115;
      background:#fff;
      border:1px solid var(--slate-300);
      border-radius:8px;
      padding:8px 10px;
      text-decoration:none;
    }
    .alliance a:hover{ border-color:#9ca3af; }
    /* space links when multiple */
    .alliance a + a{ margin-top:8px; }
    .alliance .muted{font-size:12px; margin-top:6px}

    /* ========== MARKETING EVENTS LAYOUT (FLEX, LEFT-PACKED, SNUG) ========== */
    .events{
      display:flex; flex-wrap:wrap;
      gap:6px; margin-top:6px;
      list-style:none; padding:0;
    }
    .events > .event{ width:220px; }
    .events > .month{
      flex-basis:100%;
      font-weight:800; color:#1f2937;
      margin:10px 2px 3px; padding-top:5px;
      border-top:1px dashed var(--slate-200);
      letter-spacing:.02em; font-size:11px; text-transform:uppercase;
    }

    /* Internal event card: stripe | text (content) | date chip */
    .event{
      position:relative;
      display:grid;
      grid-template-columns:3px max-content auto; /* stripe | text (content) | date */
      align-items:center;
      justify-items:start;                         /* keep date chip from stretching */
      background:#fff; border:1px solid var(--slate-200); border-radius:6px;
      padding:2px 4px; column-gap:2px; row-gap:0;
      box-shadow:0 2px 6px rgba(15,17,21,.05);
    }
    .stripe{ width:3px; height:100%; background:var(--pure-orange); border-radius:6px; }
    .event.past{opacity:.5}

    .info{ display:flex; flex-direction:column; width:max-content; max-width:16ch; min-width:0; }
    .title{
      font-weight:800; letter-spacing:.01em; font-size:11px; line-height:1.15; margin:0;
      display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; white-space:normal;
    }
    .sub{font-weight:800; font-size:10.5px; line-height:1.1; margin-top:2px;}
    .chips{display:flex; justify-content:flex-start; gap:4px; flex-wrap:wrap; margin-top:3px}
    .chip{
      font-size:9px; padding:1px 6px; border-radius:999px;
      background:#fff; color:#0f1115; border:1px solid var(--slate-300); font-weight:700;
      max-width:100%; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }

    .datebox{
      display:inline-flex; flex-direction:column; align-items:center; justify-content:center;
      width:auto; min-width:auto; padding:2px 6px; line-height:1; justify-self:end;
    }
    .datebox .day { font-size:11px; font-weight:800; }
    .datebox .mon { font-size:8px; letter-spacing:.06em; margin-top:0; }
  </style>
</head>
<body>
  <div class="wrap">
    <!-- Brand bar -->
    <div class="brandbar">
      <div class="logos"><img src="/static/pure-storage-logo.png" alt="Pure Storage" class="logo" onerror="this.style.display='none'"></div>
      <div class="logos"><img src="/static/trace3-logo.png" alt="TRACE3" class="logo trace3" onerror="this.style.display='none'"></div>
    </div>

    <!-- Hero -->
    <section class="hero" aria-label="Portal header">
      <div class="pill"><span class="dot" aria-hidden="true"></span>Trace3 × Pure Portal</div>
      <h1>Welcome</h1>
      <p class="muted">Updates, quick links, and tools for the Trace3 team.</p>
    </section>

    <!-- Stacked white sections -->
    <section class="stack" aria-label="Sections">
      <article class="card">
        <h3>Sales</h3>
        <div class="sales-grid">
          <!-- Left: existing Sales links -->
          <ul class="links">
            <li><a href="{{ url_for('account_search') }}" target="_blank" rel="noopener noreferrer">Pure Account Team Search</a></li>
          </ul>

          <!-- Right: Alliances gray box with protected links -->
          <div class="alliance">
            <h4>Alliances</h4>

            <a href="https://docs.google.com/spreadsheets/d/1f5hnNqOmsDbTpmSrYBvjr-UARe2fTQw-tLg6k8AUMYE/edit?gid=1662296704#gid=1662296704"
               target="_blank" rel="noopener noreferrer"
               data-protected="alliances">Pipeline Report</a>

            <a href="https://docs.google.com/spreadsheets/d/1PByziPq4ZP3qJSlFwm4Jouy1c_dby9WOKh4vWnEBdts/edit?gid=0#gid=0"
               target="_blank" rel="noopener noreferrer"
               data-protected="alliances">Asset Report</a>

            <div class="muted">Password Protected</div>
          </div>
        </div>
      </article>

      <article class="card">
        <h3>Marketing</h3>
        <div class="muted">Announcements, campaigns, brand assets, and outreach tools.</div>
        <ul class="events" id="marketingEvents" role="list"></ul>
      </article>

      <article class="card">
        <h3>Pre-Sales</h3>
        <div class="muted">Tools and enablement for SEs: sizing, POVs, demos, and playbooks.</div>
      </article>

      <article class="card">
        <h3>Services</h3>
        <ul class="links">
          <li><a target="_blank" rel="noopener noreferrer" href="https://docs.google.com/presentation/d/1yb1Tz-92ktUbVgI_ydyIeUm9Zg8EFrX1/edit?slide=id.p1#slide=id.p1">Partner FlashArray Installation slidedeck</a></li>
          <li><a target="_blank" rel="noopener noreferrer" href="https://purestorage.seismic.com/app?ContentId=10fce97d-f5d2-46bc-a0be-955f456d34bc#/doccenter/e97617c3-4d85-43a7-95b8-6afa4f4957ae/doc/%252Fddf7ac24c8-73d0-de80-a9e0-b63342a730e0%252FdfMmFlNWY4NjQtY2IyOS00ZGUxLTgyNTEtMjkwOWZjNjgyMDg1%252CPT0%253D%252CRGF0YSBTaGVldA%253D%253D%252Flf3053d7eb-844f-43f6-9364-8ed38a974ca3/grid/">FlashArray Installation Workbook</a></li>
          <li><a target="_blank" rel="noopener noreferrer" href="https://purestorage.seismic.com/app?ContentId=9d3f8e03-9413-4e43-b073-5c7f3b0e4fe1#/doccenter/e97617c3-4d85-43a7-95b8-6afa4f4957ae/doc/%252Fddf7ac24c8-73d0-de80-a9e0-b63342a730e0%252FdfMmFlNWY4NjQtY2IyOS00ZGUxLTgyNTEtMjkwOWZjNjgyMDg1%252CPT0%253D%252CRGF0YSBTaGVldA%253D%253D%252Flf3fb02284-e2f2-4412-9613-fbe420262939/grid/">FlashBlade Installation Workbook</a></li>
          <li><a target="_blank" rel="noopener noreferrer" href="https://drive.google.com/drive/u/0/folders/1x-bBi4VY-Fvz86QngXXmgmgLqXUMrr5p">Partner Installation and Deployment Services SKU's</a></li>
          <li><a target="_blank" rel="noopener noreferrer" href="https://drive.google.com/drive/folders/1LjecAV4TmdQ6Yau1Nbl-v4jXW6BtKpng?usp=drive_link">Purity Code Download</a></li>
        </ul>
      </article>
    </section>

  </div>

  <script>
    // --- Marketing events (unchanged), render compact cards ---
    var marketingEvents = [
      { title: "NorCal Lunch & Learn",                     date: "2025-08-19", loc: "NorCal" },
      { title: "MI Portworx",                              date: "2025-08-19", loc: "MI", sub:"Enablement" },
      { title: "CO Golf Tournament",                       date: "2025-08-25", loc: "CO" },
      { title: "CO Fly Fishing",                           date: "2025-09-12", loc: "CO" },
      { title: "NYC Pure Accelerate",                      date: "2025-09-25", loc: "NYC" },
      { title: "T3 Evolve",                                date: "2025-09-30", loc: "T3" },
      { title: "TX A&M Tailgate",                          date: "2025-10-11", loc: "TX", sub:"Pure + Rubrik" },
      { title: "GA Celebrity Chef",                        date: "2025-10-26", loc: "GA", sub:"Executive Dinner" }
    ];
    marketingEvents.sort(function(a,b){ return new Date(a.date) - new Date(b.date); });
    (function(){
      var list = document.getElementById("marketingEvents");
      var today = new Date(); today.setHours(0,0,0,0);
      var currentGroup = "";
      marketingEvents.forEach(function(ev){
        var d = new Date(ev.date + "T00:00:00");
        var monthKey = d.toLocaleString("en-US",{ month:"short", year:"numeric" });
        if (monthKey !== currentGroup) {
          currentGroup = monthKey;
          var header = document.createElement("li");
          header.className = "month";
          header.textContent = currentGroup;
          list.appendChild(header);
        }
        var mon = d.toLocaleDateString("en-US",{ month:"short" });
        var day = d.getDate();

        var li = document.createElement("li");
        li.className = "event" + (d < today ? " past" : "");

        var stripe = document.createElement("div");
        stripe.className = "stripe";

        var info = document.createElement("div");
        info.className = "info";
        var t = document.createElement("div");
        t.className = "title";
        t.textContent = ev.title;
        info.appendChild(t);
        if (ev.sub){
          var s = document.createElement("div");
          s.className = "sub";
          s.textContent = ev.sub;
          info.appendChild(s);
        }
        var chips = document.createElement("div");
        chips.className = "chips";
        if (ev.loc){
          var chip = document.createElement("span");
          chip.className = "chip";
          chip.textContent = ev.loc;
          chips.appendChild(chip);
        }
        info.appendChild(chips);

        var datebox = document.createElement("div");
        datebox.className = "datebox";
        datebox.innerHTML = '<div class="day">'+day+'</div><div class="mon">'+mon+'</div>';

        li.appendChild(stripe);
        li.appendChild(info);
        li.appendChild(datebox);
        list.appendChild(li);
      });
    })();

    // --- Alliances link protection (password: team2025) ---
    (function(){
      var PW = 'team2025';
      function guard(e){
        if (sessionStorage.getItem('alliances_unlocked') === '1') return; // already unlocked
        e.preventDefault();
        var entered = prompt('Enter password to open Alliances links:');
        if (entered && entered.trim() === PW){
          sessionStorage.setItem('alliances_unlocked','1');
          window.open(this.href, '_blank', 'noopener');
        } else if (entered !== null){
          alert('Incorrect password.');
        }
      }
      document.querySelectorAll('a[data-protected="alliances"]').forEach(function(a){
        a.addEventListener('click', guard);
      });
    })();
  </script>
</body>
</html>
